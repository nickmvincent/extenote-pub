---
import '../styles/global.css';
import NetworkFooter from '../../../../helpers/astro/NetworkFooter.astro';

const currentPath = Astro.url.pathname;
const navLinks = [
  { href: '/', label: 'Overview' },
];
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>Collective Bargaining for Information</title>
    <meta name="description" content="Collective Bargaining in the Information Economy can address AI-driven power concentration. A position paper for NeurIPS 2025." />
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-inner">
        <a href="/" class="navbar-brand">CB4I</a>
        <div class="navbar-links">
          {navLinks.map(link => (
            <a
              href={link.href}
              class:list={['nav-link', { active: currentPath === link.href || (link.href !== '/' && currentPath.startsWith(link.href)) }]}
            >
              {link.label}
            </a>
          ))}
          <button id="theme-toggle" class="theme-toggle" title="Toggle light/dark theme" aria-label="Toggle theme">
            <svg class="icon-sun" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
            <svg class="icon-moon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
          </button>
        </div>
      </div>
    </nav>
    <slot />

    <NetworkFooter
      links={[
        { href: 'https://datacounterfactuals.org', label: 'Data Counterfactuals' },
        { href: 'https://datalicenses.org', label: 'Data Licenses' },
        { href: 'https://exploringai.org', label: 'Data Napkin Math' },
        { href: 'https://sharedreferences.pages.dev', label: 'Shared References' },
        { href: 'https://extenote.pages.dev', label: 'ExteNote Docs' },
      ]}
    />
  <script is:inline>
    // Theme toggle with system preference and localStorage
    (function() {
      const root = document.documentElement;
      const toggle = document.getElementById('theme-toggle');

      function getPreferredTheme() {
        const saved = localStorage.getItem('theme');
        if (saved) return saved;
        return window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark';
      }

      function setTheme(theme) {
        if (theme === 'light') {
          root.classList.add('light');
        } else {
          root.classList.remove('light');
        }
        localStorage.setItem('theme', theme);
      }

      setTheme(getPreferredTheme());

      if (toggle) {
        toggle.addEventListener('click', () => {
          const current = root.classList.contains('light') ? 'light' : 'dark';
          setTheme(current === 'light' ? 'dark' : 'light');
        });
      }

      window.matchMedia('(prefers-color-scheme: light)').addEventListener('change', (e) => {
        if (!localStorage.getItem('theme')) {
          setTheme(e.matches ? 'light' : 'dark');
        }
      });
    })();
  </script>
  </body>
</html>
